# 🔍 登录失败 - 诊断步骤

## ⚠️ 已添加详细日志

我刚刚添加了详细的日志输出，可以帮助我们找到问题。

## 🚀 请按以下步骤操作

### 步骤1: 打开浏览器
访问：**http://localhost:5173/**

### 步骤2: 打开开发者工具
按 **F12** 打开开发者工具，切换到 **Console** 标签

### 步骤3: 尝试登录
- 用户名: `test`
- 密码: `123456`
- 点击"登录"按钮

### 步骤4: 查看Console输出
Console中会显示：
```
尝试登录: {username: "test", password: "123456"}
login response: {...}
login fulfilled, payload: {...}
登录成功: {...}
```

或者如果失败：
```
尝试登录: {username: "test", password: "123456"}
登录失败: Error: ...
```

## 📸 请告诉我

**点击登录后，Console中显示了什么？**

请复制或截图Console中的内容。

特别关注：
1. 是否看到"尝试登录"？
2. 是否看到"login response"？
3. 如果失败，完整的错误信息是什么？

## 🔍 可能的错误

### 错误1: 网络请求失败
**表现**: `Network Error` 或 `Failed to fetch`
**原因**: 后端服务未运行或端口不对
**解决**: 检查 http://localhost:3000/health

### 错误2: 401 Unauthorized
**表现**: `401` 状态码
**原因**: 用户不存在或密码错误
**解决**: 检查用户名和密码

### 错误3: Cannot read property 'data' of undefined
**表现**: `undefined` 错误
**原因**: API返回格式不对
**解决**: 检查login response的格式

## 💡 后端API测试结果

```bash
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"test","password":"123456"}'
```

**返回**: ✅ 成功
```json
{
  "success": true,
  "message": "登录成功",
  "data": {
    "user": {...},
    "token": "..."
  }
}
```

## 🎯 现在做什么

1. **访问 http://localhost:5173/**
2. **按F12打开Console**
3. **尝试登录**
4. **告诉我Console显示了什么**

通过详细的日志，我们可以准确定位问题！

