# 智能仓位推荐系统使用说明

## 系统概述

智能仓位推荐系统是基于您提出的"左右仓"交易理念设计的一套AI辅助投资决策系统。它通过多维数据分析，自动推荐股票的仓位配置，包括建仓时机、加仓节点、仓位大小和退出时机。

## 核心理念

### 左仓（左侧仓位）
- **定义**：在行情未明确反转前，提前预判趋势方向并建仓
- **时机**：下跌趋势中预判"跌到位了"、上涨趋势中预判"调整结束"
- **策略**：用轻仓博弈趋势转向（10-30%仓位）
- **特点**：仓位轻、风险可控、可能短期被套但长期收益潜力大

### 右仓（右侧仓位）
- **定义**：在行情明确反转/启动后，确认趋势方向再建仓
- **时机**：看到"放量突破前期阻力位"、"形成明确上升结构"等信号
- **策略**：用重仓把握确定性收益（30-50%仓位）
- **特点**：确定性高、趋势明确、避免了"抄底再跌"的风险

### 主线仓位
- **定义**：趋势持续向上，可以逐步加仓到主线仓位
- **策略**：总仓位50-70%
- **特点**：趋势延续、基本面支撑、可以放大收益

## 系统功能

### 1. 智能推荐
系统会综合以下维度进行分析：
- **技术面**（30%权重）：趋势、均线、MACD、RSI等
- **基本面**（25%权重）：估值、盈利能力、成长性、财务健康
- **趋势分析**（25%权重）：时间序列分析、动量、波动率
- **市场环境**（20%权重）：板块、资金流向、市场情绪

### 2. 仓位大小建议
- 左仓：10-30%
- 右仓：30-50%
- 主线：50-70%
- 最大仓位限制：避免过度集中

### 3. 时间节点预测
系统会推荐：
- **建左仓时间**：什么时候开始建仓
- **升级右仓时间**：什么信号出现时从左仓升级到右仓
- **升级主线时间**：什么时候可以加到主线仓位
- **加仓/减仓时间**：动态调整建议
- **退出时间**：什么时候应该清仓

### 4. 风险控制
- **止损价**：建议设置-7~10%止损
- **目标价**：设置+20~30%目标价
- **仓位阶梯**：不同价格点的仓位配置建议

### 5. 趋势预测
- **入场信号**：什么时候适合建仓
- **出场信号**：什么时候应该退出
- **关键节点**：未来重要的时间节点和事件
- **趋势方向**：未来趋势预测（向上/向下/震荡）

## 使用方法

### 前端访问
1. 登录系统后，在左侧菜单点击"智能推荐"
2. 系统会自动加载推荐股票池
3. 点击"查看详情"可以看到每个股票的详细推荐

### API使用

#### 1. 获取单个股票推荐
```bash
POST /api/smart-recommendation/recommend/:stockCode
```

#### 2. 批量获取推荐
```bash
POST /api/smart-recommendation/batch
Body: { "stockCodes": ["000001", "000002"] }
```

#### 3. 获取推荐股票池
```bash
GET /api/smart-recommendation/stock-pool
```

#### 4. 获取推荐概览
```bash
GET /api/smart-recommendation/overview
```

## 推荐逻辑详解

### 趋势阶段判断

系统会判断股票处于哪个趋势阶段：

1. **筑底阶段**（bottom-building）
   - 下跌趋势，但力度减弱
   - 适合建左仓

2. **突破阶段**（breakout）
   - 技术面强势突破
   - 适合建右仓或升级到右仓

3. **上涨中继**（uptrend-continuation）
   - 趋势持续向上
   - 适合升级到主线仓位

4. **震荡整理**（consolidation）
   - 横盘整理
   - 建议持有观察

5. **回调阶段**（pullback）
   - 上涨后的正常回调
   - 可以逢低加仓

### 机会等级

- **高机会**：技术面好+基本面好+趋势向上
- **中高机会**：基本面好+技术面一般（适合左仓）
- **中等机会**：各方面指标均衡
- **低机会**：部分指标不佳
- **极低机会**：建议观望

### 操作建议

根据综合评估，系统会给出以下操作建议：

- **build**：建仓（10-20%）
- **add**：加仓（逐步增加到目标仓位）
- **hold**：持有（继续观察）
- **reduce**：减仓（降低风险）
- **exit**：退出（清仓）
- **upgrade**：升级（从左仓升级到右仓或主线）

## 数据更新

系统会实时更新：
- 股价数据
- 技术指标
- 基本面数据
- 市场情绪

推荐结果会根据最新数据动态调整。

## 注意事项

1. **仅供参考**：AI推荐仅供参考，不构成投资建议
2. **风险提示**：投资有风险，入市需谨慎
3. **实际决策**：请结合自身风险承受能力做出最终决策
4. **仓位管理**：不要把所有资金都投入到单一标的
5. **持续观察**：定期查看推荐更新，根据市场变化调整

## 技术架构

### 后端服务
- `smartPositionRecommendation.ts`：核心推荐引擎
- `technicalAnalysis.ts`：技术面分析
- `fundamentalAnalysis.ts`：基本面分析
- `timeSeriesAnalysis.ts`：时间序列分析

### 前端页面
- `SmartRecommendation.tsx`：推荐展示页面
- 支持实时数据更新
- 可视化展示推荐详情

### API路由
- `/api/smart-recommendation/*`：推荐相关API

## 未来优化

1. **机器学习**：引入ML模型提升预测准确度
2. **实时监控**：实时监控推荐股票的动态变化
3. **回测功能**：验证推荐策略的历史表现
4. **用户反馈**：收集用户执行反馈，持续优化算法
5. **个性化配置**：允许用户自定义推荐参数

## 总结

智能仓位推荐系统实现了您的核心理念：通过大数据分析和AI推理，自动判断股票的仓位配置，给出建仓、加仓、减仓的具体时间节点。它不再是简单的左右仓位数字划分，而是一套完整的"试错-验证-加仓"交易系统。

系统通过多维数据分析，将"不确定的预判"转化为"确定的趋势收益"，帮助您：
- 避免错过机会
- 控制投资风险
- 优化仓位配置
- 提升投资收益

祝您投资顺利！

