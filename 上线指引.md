# 🚀 股票决策小程序 - 上线指引

## 📋 当前进度

✅ **已完成**
- Node.js 18.17.1 已安装

⚠️ **待完成**
- MySQL 数据库
- Redis 缓存服务
- 环境配置
- 依赖安装
- 服务启动

---

## 🔧 第一步：安装 MySQL 数据库

### macOS 用户（推荐使用 Homebrew）

```bash
# 安装 MySQL
brew install mysql

# 启动 MySQL 服务
brew services start mysql

# 设置 root 密码（首次运行）
mysql_secure_installation
```

### 手动安装方式

1. 访问 MySQL 官网：https://dev.mysql.com/downloads/mysql/
2. 下载 macOS 版本安装包
3. 安装并启动 MySQL 服务

### 验证安装

```bash
# 检查 MySQL 版本
mysql --version

# 登录 MySQL（默认无密码）
mysql -u root
```

---

## ⚡ 第二步：安装 Redis 缓存服务

### macOS 用户（使用 Homebrew）

```bash
# 安装 Redis
brew install redis

# 启动 Redis 服务
brew services start redis

# 或者手动启动
redis-server
```

### 验证安装

```bash
# 检查 Redis 是否运行
redis-cli ping
# 应该返回: PONG
```

---

## ⚙️ 第三步：配置环境变量

### 创建后端配置文件

在项目根目录执行：

```bash
cd backend
cp env.example .env
```

### 编辑 .env 文件

```bash
# 数据库配置
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=你的MySQL密码
DB_NAME=stock_decision

# Redis配置
REDIS_URL=redis://localhost:6379

# JWT密钥（请修改为随机字符串）
JWT_SECRET=your_jwt_secret_key_change_this

# 服务器配置
PORT=5000
NODE_ENV=development
FRONTEND_URL=http://localhost:5173

# 日志配置
LOG_LEVEL=info

# 第三方API配置（暂时保持默认）
TUSHARE_TOKEN=your_tushare_token
EASTMONEY_API_KEY=your_eastmoney_api_key
```

---

## 🗄️ 第四步：初始化数据库

### 创建数据库

```bash
# 登录 MySQL
mysql -u root -p

# 执行以下SQL命令
CREATE DATABASE stock_decision CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
USE stock_decision;
exit;
```

**注意**：数据库会在首次启动后端时自动创建表结构（如已配置自动建表）。

---

## 📦 第五步：安装项目依赖

### 安装后端依赖

```bash
cd backend
npm install
```

### 安装前端依赖

```bash
cd ../frontend
npm install
```

---

## 🚀 第六步：启动服务

### 方法一：使用启动脚本（推荐）

```bash
# 在项目根目录
chmod +x start.sh
./start.sh
```

### 方法二：手动启动

**终端 1 - 启动后端**
```bash
cd backend
npm run dev
```

**终端 2 - 启动前端**
```bash
cd frontend
npm run dev
```

---

## ✅ 第七步：验证系统

### 检查服务状态

1. **后端服务**: http://localhost:5000/health
   - 应返回：`{"status":"ok","timestamp":"..."}`

2. **前端服务**: http://localhost:5173
   - 应显示登录页面或仪表板

### 测试功能

1. ✅ 访问健康检查接口
2. ✅ 登录/注册功能
3. ✅ 持仓管理功能
4. ✅ 数据展示功能

---

## 🐛 常见问题解决

### 问题1：MySQL 连接失败

**解决方案**：
```bash
# 检查 MySQL 是否运行
brew services list | grep mysql

# 重启 MySQL
brew services restart mysql

# 检查端口是否被占用
lsof -i :3306
```

### 问题2：Redis 连接失败

**解决方案**：
```bash
# 检查 Redis 是否运行
brew services list | grep redis

# 重启 Redis
brew services restart redis

# 测试连接
redis-cli ping
```

### 问题3：端口被占用

**解决方案**：
```bash
# 查找占用端口的进程
lsof -i :5000  # 后端端口
lsof -i :5173  # 前端端口

# 杀死进程
kill -9 <PID>
```

### 问题4：依赖安装失败

**解决方案**：
```bash
# 清除缓存重新安装
cd backend
rm -rf node_modules package-lock.json
npm install

cd ../frontend
rm -rf node_modules package-lock.json
npm install
```

---

## 📝 下一步操作

完成以上步骤后，系统将：

1. ✅ 后端服务运行在：http://localhost:5000
2. ✅ 前端服务运行在：http://localhost:5173
3. ✅ 数据库已连接并初始化
4. ✅ Redis 缓存服务已启动

---

## 🎯 上线完成后的功能

- 🎵 音乐播放器风格的股票管理界面
- 📊 持仓管理和分析
- 📈 技术分析和基本面分析
- 📋 智能报表生成
- 🤖 AI 决策支持
- ⚙️ 系统监控和风险控制

---

**祝您使用愉快！如有问题，请查看日志或联系技术支持。** 🎵📈

